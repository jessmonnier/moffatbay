<!--
CSD-460 Capstone Blue Team
Moffat Bay Lodge Project
Vee Bell, Deja Faison, Julia Gonzalez, Jess Monnier
Professor Sue Sampson
Developed October thru December of 2025
-->

{% extends 'pages/base.html' %}

{% block title %}Login | Moffat Bay Lodge{% endblock %}

{% block content %}
<div class="registerPanel">
  <h2>Login</h2>

  {% if request.GET.next %}
    <p class="error-message">
        You are not logged in. You must log in to access that page.
    </p>
  {% endif %}

  {% if form.errors %}
    <p style="color: red;">Please check your username and password.</p>
  {% endif %}

<form method="post">
  {% csrf_token %}

  <p>
    <label for="{{ form.username.id_for_label }}">Email:</label>
    {{ form.username }}
  </p>

  <p>
  <label for="{{ form.password.id_for_label }}">Password:</label>
  <input 
      type="password" 
      name="{{ form.password.name }}" 
      id="password-field"
      value=""
      required
  >

  <button type="button" id="togglePassword" style="margin-left: 8px;">
      Show
  </button>
</p>

  <button class="submitButton" type="submit">Login</button>
</form>

  <p>Don't have an account yet?
    <a href="{% url 'register' %}">Register here</a>.
  </p>
</div>

<script>
document.getElementById("togglePassword").addEventListener("click", function () {
    const passwordField = document.getElementById("password-field");
    const type = passwordField.getAttribute("type") === "password" ? "text" : "password";
    passwordField.setAttribute("type", type);

    // Change button text
    this.textContent = type === "password" ? "Show" : "Hide";
});
</script>

{% endblock %}
