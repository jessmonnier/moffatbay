<!--
CSD-460 Capstone Blue Team
Moffat Bay Lodge Project
Vee Bell, Deja Faison, Julia Gonzalez, Jess Monnier
Professor Sue Sampson
Developed October thru December of 2025
-->

{% extends 'pages/base.html' %}

{% block title %}Login | Moffat Bay Lodge{% endblock %}

{% block content %}
<div class="registerPanel">
  <h2>Login</h2>

  {% if request.GET.next %}
    <p class="error-message">
        You are not logged in. You must log in to access that page.
    </p>
  {% endif %}

  {% if form.errors %}
    <p style="color: red;">Please check your username and password.</p>
  {% endif %}
<div class=loginForm>
<form method="post">
  {% csrf_token %}

  <p>
    <label for="{{ form.username.id_for_label }}">Email:</label>
    {{ form.username }}
  </p>

<p style="position: relative;">
  <label for="{{ form.password.id_for_label }}">Password:</label>

  <input 
      type="password" 
      name="{{ form.password.name }}" 
      id="password-field"
      required
  >

  <span id="togglePassword" class="password-toggle" title="Show password">
      ğŸ‘ï¸
  </span>
</p>

  <button class="submitButton" type="submit">Login</button>
</form>
</div>

  <p align="center">Don't have an account yet?
    <a href="{% url 'register' %}">Register here</a>.
  </p>

</div>

<script>
document.getElementById("togglePassword").addEventListener("click", function () {
    const passwordField = document.getElementById("password-field");
    const isHidden = passwordField.type === "password";
    passwordField.type = isHidden ? "text" : "password";

    // swap icon
    this.textContent = isHidden ? "ğŸ™ˆ" : "ğŸ‘ï¸";

    // Update hover text
    this.title = isHidden ? "Hide password" : "Show password";
});
</script>

{% endblock %}
